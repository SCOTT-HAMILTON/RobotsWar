double speedx = 100
double speedy = 100
double offx = speedx
double offy = 0
double change_dir = 1

loop:
	double prec_x = posx
	double prec_y = posy
	
	if (offx < 0 and blockleft == -1):
		offx = speedx
	else if (offy < 0 and blockup == -1):
		offy = speedy
	else if (offx > 0 and blockright == -1):
		offx = -speedx
	else if (offy > 0 and blockdown == -1):
		offy = -speedy
	end
	
	move(offx, offy);
		
	if ( prec_x == posx and prec_y == posy ):
		if (blockright == 0):
			print("go right !!")
			offx = speedx
			offy = 0
		else if (blockdown == 0):
			print("go down !!")
			offx = 0
			offy = speedy
		else if (blockup == 0):
			print("go up !!")
			offx = 0
			offy = -speedy
		else if (blockleft == 0):
			print("go left !!")
			offx = -speedx
			offy = 0
		end 
	end
end